# SVI score - census tract to ZIP codes
This markdown contains the steps for the conversion of SVI from the
census tract level to 3-digit ZIP codes by using crosswalk tables. This
was done as way to connect this contextual factor with the buprenorphine
episodes at the 3-digit ZIP code level from claims data.

# Libraries

    library(dplyr)
    library(data.table)
    library(readxl)
    library(tidycensus)
    library(wesanderson)
    library("ggsci")
    library(ggplot2)
    library(sf)

This markdown contains the conversion from the SDOH indices from census
tracts to ZIP codes.

# SVI

## Step 1: Join Census Tract data with Crosswalk table

We are going to use the HUD-USPS ZIP Code Crosswalk data from the HUDâ€™s
Office of Policy Development and Research (PD&R). I am using all the
files from the crosswalk tables to joined the different SVI scores.

### 2022

Crosswalk from 2024 and SVI from 2022.

    crosswalk_ZIPCodes <- read_excel("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/TRACT_ZIP/TRACT_ZIP_062024.xlsx", col_types =  c("text", "text", "text", "text", "numeric","numeric","numeric","numeric")) %>% 
      mutate( 
        year = 2022
          ) %>% 
      select(
        -USPS_ZIP_PREF_CITY, -USPS_ZIP_PREF_STATE
      )

    SVI <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI/SVI_2022_US.csv", 
                 colClasses = c("FIPS" = "character")) %>% 
      mutate( 
        year = 2022
          )

### 2020

    crosswalk_ZIPCodes <- read_excel("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/TRACT_ZIP/tract_zip_032024.xlsx", col_types =  c("text", "text", "text", "text", "numeric","numeric","numeric","numeric")) %>% 
      mutate(
        year = 2020
        ) %>% 
      select(
        -USPS_ZIP_PREF_CITY, -USPS_ZIP_PREF_STATE
      )


    SVI <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI/SVI_2020_US.csv", 
                 colClasses = c("FIPS" = "character"))  %>% 
      mutate( 
        year = 2020
          )

### 2018

    crosswalk_ZIPCodes <- read_excel("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/TRACT_ZIP/TRACT_ZIP_122018.xlsx", col_types =  c("text", "text", "numeric","numeric","numeric","numeric")) 

    colnames(crosswalk_ZIPCodes) <- toupper(colnames(crosswalk_ZIPCodes))


    crosswalk_ZIPCodes <- crosswalk_ZIPCodes %>% 
      mutate( 
        year = 2018
          )

    SVI <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI/SVI_2018_US.csv", 
                 colClasses = c("FIPS" = "character"))  %>% 
      mutate( 
        year = 2018
          )

### 2016

    crosswalk_ZIPCodes <- read_excel("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/TRACT_ZIP/TRACT_ZIP_122018.xlsx", col_types = c("text", "text", "numeric","numeric","numeric","numeric")) 

    colnames(crosswalk_ZIPCodes) <- toupper(colnames(crosswalk_ZIPCodes))

    crosswalk_ZIPCodes <- crosswalk_ZIPCodes %>% 
      mutate( 
        year = 2016
          )

    SVI <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI/SVI_2016_US.csv", 
                 colClasses = c("FIPS" = "character"))  %>% 
      mutate( 
        year = 2016
          )

### 2014

    crosswalk_ZIPCodes <- read_excel("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/TRACT_ZIP/TRACT_ZIP_122016.xlsx", col_types = c("text", "text", "numeric","numeric","numeric","numeric")) %>% 
      mutate( 
        year = 2014
          )

    SVI <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI/SVI_2014_US.csv", 
                 colClasses = c("FIPS" = "character"))  %>% 
      mutate( 
        year = 2014
          )

### 2010

For the 2010, we lost a lot of tracts. HUD does not have a TRACT-ZIP
before 2010.

    crosswalk_ZIPCodes <- read_excel("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/TRACT_ZIP/TRACT_ZIP_032012.xlsx", col_types = c("text", "text", "numeric","numeric","numeric","numeric")) %>% 
      mutate( 
        year = 2010
          )

    SVI <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI/SVI_2010_US.csv", 
                 colClasses = c("FIPS" = "character"))  %>% 
      mutate( 
        year = 2010
          )

### Joined SVI with crosswalk tables

Then, we joined this crosswalk table with the SDOH indices, ie., SVI and
ADI. For the SVI, we are going to select the overall ranking, which is
the `RPL_THEMES`. If necessary, we can select others or a different one.

    SVI_Overall <- SVI %>% 
      #select(STATE_NAME, STATE_ABBR, COUNTY, FIPS, LOCATION, R_PL_THEMES, year) %>% 
      #mutate(RPL_THEMES = R_PL_THEMES) %>% 
      select(ST, STATE, ST_ABBR, STCNTY, COUNTY, FIPS, LOCATION, AREA_SQMI, RPL_THEMES, year) %>% 
      #arrange(year) %>%
      mutate(TRACT = as.character(FIPS), 
             RPL_THEMES = as.numeric(RPL_THEMES)) %>% 
      filter(RPL_THEMES >= 0 & RPL_THEMES <= 1)

    joined_crosswalk_SVI <- SVI_Overall %>% 
      left_join(crosswalk_ZIPCodes, by = c("year", "TRACT"))

Census tracts in SVI without a conversion from the crosswalk tables.

    joined_crosswalk_SVI %>% filter(is.na(TOT_RATIO)) %>% select(TRACT) %>% unique %>% nrow

## Step 2: Weight SDOH index by population or area

We multiply the SDOH index of each tract by its ratio of overall
addresses for the corresponding ZIP code.

    joined_crosswalk_SVI <- joined_crosswalk_SVI %>% 
      #group_by(year) %>% 
      mutate(W_RPL_THEMES = TOT_RATIO * RPL_THEMES) 

## Step 3: Aggregate by 5-digit ZIP code using weighted SDOH indices

By each 5-digit ZIP code, we sum all the weighted SDOH indices.

    joined_crosswalk_SVI <- joined_crosswalk_SVI %>% 
      filter(RPL_THEMES >= 0 & RPL_THEMES <= 1)

    joined_crosswalk_SVIByZIP <- joined_crosswalk_SVI %>% 
      group_by(ZIP)  %>% # year) %>% 
      mutate(A_RPL_THEMES = sum(W_RPL_THEMES)/n()) %>% 
      ungroup()

## Step 4: Group by 3-digit ZIP code and calculate population-weighted average SDOH index.

To calculate the aggregated SDOH index, we use the following formula:

![](images/Screenshot%202024-09-23%20203649.png)

To do that, we are going to use the estimate of population for the 2022
by ZIP code from the `tidycensus`.

    total_estimations_18to64 <- get_acs(
      geography = "zcta",
      variables = c("B01001_007", "B01001_008", "B01001_009", "B01001_010", "B01001_011",  # Male, 18-64
                    "B01001_031", "B01001_032", "B01001_033", "B01001_034", "B01001_035"), # Female, 18-64
      survey = "acs5",
      year = 2022
      )


    total_estimations_18to64 <- total_estimations_18to64 %>%
      group_by(GEOID) %>%
      summarize(total_population_18_64 = sum(estimate))

    #Aggregate by 3-digit ZIP codes
    total_estimations_18to64$FirstThreeDigits <- substr(total_estimations_18to64$GEOID, 1, 3)
    total_estimations_18to64_3digit <- total_estimations_18to64 %>%
      group_by(FirstThreeDigits) %>%
      summarize(aggregate_3digit=sum(total_population_18_64)) %>% 
      ungroup()

After obtaining the aggregate total population estimate by 3-digit ZIP
code from the US census, we proceed to calculate the same in the
crosswalk table.

    joined_crosswalk_SVI_3digit <- joined_crosswalk_SVIByZIP %>% 
      select(ZIP, A_RPL_THEMES) %>%  #, year) %>%
      mutate(FirstThreeDigits = substr(ZIP, 1, 3)) 

    # 
    # joined_crosswalk_SVI_3digit <- joined_crosswalk_SVI_3digit %>%
    #   left_join(total_estimations_18to64_3digit,  by = "FirstThreeDigits")

Finally, follow the equation.

    joined_crosswalk_SVI_3digit_2<- joined_crosswalk_SVI_3digit %>%
      group_by(FirstThreeDigits) %>%
      mutate(SVI_aggregate_3digit= sum(A_RPL_THEMES * aggregate_3digit) / sum(aggregate_3digit)) %>% 
      mutate(SVI_aggregate_3digit = ifelse(is.na(aggregate_3digit) | aggregate_3digit == 0, sum(A_RPL_THEMES)/n(), SVI_aggregate_3digit)) %>% 
      ungroup() 

    joined_crosswalk_SVI_3digit_2 <- joined_crosswalk_SVI_3digit_2 %>% 
      select(-aggregate_3digit) %>% 
      arrange(FirstThreeDigits) %>% 
      group_by(FirstThreeDigits) %>% 
      slice(1) %>% 
      ungroup() 

### Step 4.1. Just doing the average.

How is the SVI by 3-digit ZIP code if just the average (without taking
into account the population) is calculated?

    joined_crosswalk_SVI_3digit_2<- joined_crosswalk_SVI_3digit %>%
      group_by(FirstThreeDigits) %>% #, year) %>%
      summarise(SVI_aggregate_3digit = sum(A_RPL_THEMES) / n(), 
                sd_aggregate = sd(A_RPL_THEMES)) %>% 
      ungroup() %>% 
      mutate(
        sd_aggregate = ifelse(is.na(sd_aggregate), 0, sd_aggregate)
      ) %>% 
      na.omit()

## Classification into smaller groups

You can then classify the codes according to:

-   Low Vulnerability (0-0.25)
    -   Areas in this category rank in the bottom 25% of vulnerability.
        This means they have relatively low social vulnerability
        compared to other areas in the dataset.
    -   These areas have fewer socio-economic disadvantages and are
        generally better equipped to prepare for, respond to, and
        recover from disasters or emergencies.
-   Low-Medium Vulnerability (0.25-0.50)
    -   These areas rank between the 25th and 50th percentiles.
    -   They show a moderate level of vulnerability, meaning they face
        some social and economic challenges but are not the most
        vulnerable in comparison to others.
-   Medium-High Vulnerability (0.50-0.75)
    -   Areas in this category rank between the 50th and 75th
        percentiles.
    -   These communities face significant vulnerabilities that could
        affect their ability to respond to and recover from disasters or
        crises.
-   High Vulnerability (0.75-1.00)
    -   These areas are in the top 25% of social vulnerability, meaning
        they rank in the 75th percentile or higher.
    -   These communities are the most socially vulnerable and face the
        highest risks, often due to factors like poverty, lack of access
        to transportation, and other socio-economic challenges.

Because we are doing the aggregation until 3-digit ZIP codes, we have to
rescale according with the new quartiles.

    quartiles_SVI3digit <- quantile(joined_crosswalk_SVI_3digit_2$SVI_aggregate_3digit, na.rm = TRUE)
    quartiles_SVI3digit

    joined_crosswalk_SVI_3digit_2 <- joined_crosswalk_SVI_3digit_2 %>% 
      mutate(
        SVI_3digit_class = case_when(
          SVI_aggregate_3digit >= quartiles_SVI3digit["0%"] & SVI_aggregate_3digit < quartiles_SVI3digit["25%"] ~ "Low", 
          SVI_aggregate_3digit >= quartiles_SVI3digit["25%"] & SVI_aggregate_3digit < quartiles_SVI3digit["50%"] ~ "Low-Medium", 
          SVI_aggregate_3digit >= quartiles_SVI3digit["50%"] & SVI_aggregate_3digit < quartiles_SVI3digit["75%"] ~ "Medium-High", 
          SVI_aggregate_3digit >= quartiles_SVI3digit["75%"] ~ "High"
        )
      ) %>% 
      na.omit(SVI_aggregate_3digit)

Also, to rescale from 0 to 1, we set the highest SVI value (0.64) to 1
and divide all the SVI values by the highest SVI (0.64).

    joined_crosswalk_SVI_3digit_2 <- joined_crosswalk_SVI_3digit_2 %>% 
      arrange(SVI_aggregate_3digit) %>% 
      mutate(
        SVI_aggregate_3digit = as.numeric(SVI_aggregate_3digit),
        SVI_3digit_Rescale = if_else(
          SVI_aggregate_3digit != max(SVI_aggregate_3digit), SVI_aggregate_3digit/max(SVI_aggregate_3digit), 1
        )
      )

Save the file!

    fwrite(joined_crosswalk_SVI_3digit_2, "C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/093024_SVI2010_3digitZIP.csv")

## Joining all years - SVI

    SVI2010_3digitZIP <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/093024_SVI2010_3digitZIP.csv", 
                 colClasses = c("FirstThreeDigits" = "character"))

    colnames(SVI2010_3digitZIP) <- unlist(lapply(colnames(SVI2010_3digitZIP), function(x)
      if_else(x == "FirstThreeDigits",x,paste0(x,"_2010"))
      ))

    SVI2014_3digitZIP <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/093024_SVI2014_3digitZIP.csv", 
                 colClasses = c("FirstThreeDigits" = "character"))

    colnames(SVI2014_3digitZIP) <- unlist(lapply(colnames(SVI2014_3digitZIP), function(x)
      if_else(x == "FirstThreeDigits",x,paste0(x,"_2014"))
      ))

    SVI2016_3digitZIP <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/093024_SVI2016_3digitZIP.csv", 
                 colClasses = c("FirstThreeDigits" = "character"))

    colnames(SVI2016_3digitZIP) <- unlist(lapply(colnames(SVI2016_3digitZIP), function(x)
      if_else(x == "FirstThreeDigits",x,paste0(x,"_2016"))
      ))


    SVI2018_3digitZIP <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/093024_SVI2018_3digitZIP.csv", 
                 colClasses = c("FirstThreeDigits" = "character"))

    colnames(SVI2018_3digitZIP) <- unlist(lapply(colnames(SVI2018_3digitZIP), function(x)
      if_else(x == "FirstThreeDigits",x,paste0(x,"_2018"))
      ))


    SVI2020_3digitZIP <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/093024_SVI2020_3digitZIP.csv",
                               colClasses = c("FirstThreeDigits" = "character"))

    colnames(SVI2020_3digitZIP) <- unlist(lapply(colnames(SVI2020_3digitZIP), function(x)
      if_else(x == "FirstThreeDigits",x,paste0(x,"_2020"))
      ))


    SVI2022_3digitZIP <- fread("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/093024_SVI_3digitZIP.csv", 
                 colClasses = c("FirstThreeDigits" = "character"))

    colnames(SVI2022_3digitZIP) <- unlist(lapply(colnames(SVI2022_3digitZIP), function(x)
      if_else(x == "FirstThreeDigits",x,paste0(x,"_2022"))
      ))

Joined with all the years.

    joined_SVI_allYears <-SVI2010_3digitZIP %>% 
      full_join(SVI2014_3digitZIP, by = "FirstThreeDigits") %>%
      full_join(SVI2016_3digitZIP, by = "FirstThreeDigits") %>% 
      full_join(SVI2018_3digitZIP, by = "FirstThreeDigits") %>% 
      full_join(SVI2020_3digitZIP, by = "FirstThreeDigits") %>% 
      full_join(SVI2022_3digitZIP, by = "FirstThreeDigits")

    fwrite(joined_SVI_allYears, "C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/SVI_aggregate/100124_SVIAllYears_3digitZIP.csv")

## Plot!

### Using shapefiles

    ZIP_CodeShapeFile <- st_read("C:/Users/fdf685/OneDrive - University of Texas at San Antonio/UTSA/HEAL Lab/[A] OUD treatment discontinuation/ADI/ZIPCode/tl_2023_us_zcta520.shp")

To remove blank spaces: Voroni polygons.

    # Create a bounding box polygon that covers the extent of the shapefile
    bounding_box <- st_as_sfc(st_bbox(ZIP_CodeShapeFile))

    # Dissolve the ZIP code polygons into one single boundary
    ZIP_CodeShapeFile_union <- st_union(ZIP_CodeShapeFile)

    # Create a polygon that represents the areas outside the ZIP code regions (the "background")
    background_polygon <- st_difference(bounding_box, ZIP_CodeShapeFile_union)

    background_polygon_df <- st_sf(ZCTA5CE20 = "Background", geometry = background_polygon)

    ZIP_CodeShapeFile <- ZIP_CodeShapeFile  %>% dplyr::select(
      ZCTA5CE20, geometry
    )

    # Combine the background polygon with the ZIP code shapefile
    ZIP_CodeShapeFile_union_filled <- rbind(ZIP_CodeShapeFile, background_polygon_df)

Create the column of 3 digits.

    ZIP_CodeShapeFile_3digit <- ZIP_CodeShapeFile_union_filled %>%
      mutate(ZIP3 = substr(as.character(ZCTA5CE20 ), 1, 3))

Dissolve polygons.

    ZIP_CodeShapeFile_3digit <- ZIP_CodeShapeFile_3digit %>%
      group_by(ZIP3) %>%
      summarize(geometry = st_union(geometry))

Join with the SVI dataset.

    colnames(joined_crosswalk_SVI_3digit_2)[1] <- "ZIP3"

    ZIP_CodeShapeFile_3digit <- ZIP_CodeShapeFile_3digit %>% 
      ungroup() %>%
      left_join(joined_crosswalk_SVI_3digit_2, by = "ZIP3")

    ZIP_CodeShapeFile_3digit_2 <- ZIP_CodeShapeFile_3digit %>% 
      na.omit()

Plot.

    SVI_3digit_group <- ZIP_CodeShapeFile_3digit_2 %>% 
      ggplot(aes(fill = SVI_3digit_class)) +
      geom_sf(color = "black", lwd = 0.15) +
      scale_fill_manual(values = c("Low" = "#FFFFDB", "Low-Medium" = "#BDE5CA", 
                                      "Medium-High" = "#7ACCD6", "High" = "#648ec2")) +
      theme_void() + 
      labs(
        fill = "3-digit ZIP code SVI - groups"
      )

    ggsave(SVI_3digit_group, 
           filename = "SVI_3digit_group_2010.svg",
           device = "svg")

### Using the shapefiles from tidycensus

    map_ZipCode <- get_acs(
      geography = "zcta",
      variables = "B01001_007",
      survey = "acs5",
      year = 2020, 
      geometry = TRUE
      )

    #Aggregate by 3-digit ZIP codes
    map_ZipCode$FirstThreeDigits <- substr(map_ZipCode$GEOID, 1, 3)

    map_ZipCode_3digit <- map_ZipCode %>%
      group_by(FirstThreeDigits) %>%
      summarize(aggregate_3digit=sum(estimate)) %>% 
      ungroup() 

    map_ZipCode_3digit <- map_ZipCode_3digit %>% 
      select(-aggregate_3digit)

3-digit SVI

    map_ZipCode_3digit <- map_ZipCode_3digit %>% 
      left_join(joined_crosswalk_SVI_3digit_2, by = "FirstThreeDigits")

#### Continous 3-digit ZIP SVI

    pal <- wes_palette("Zissou1", 100, type = "continuous")


    map_ZipCode_3digit %>% 
      ggplot(aes(fill = SVI_3digit_Rescale)) +
      geom_sf(color = "black", lwd = 0.15) +
      scale_fill_gradientn(colours = pal) +
      theme_void() + 
      labs(
        fill = "3-digit ZIP code SVI"
      )

#### Standard deviation of the SVI

    pal <- wes_palette("Zissou1", 100, type = "continuous")


    map_ZipCode_3digit %>% 
      mutate(coeff_var = sd_aggregate /SVI_aggregate_3digit) %>% 
      ggplot(aes(fill = coeff_var)) +
      geom_sf(color = "black", lwd = 0.15) +
      scale_fill_gradientn(colours = pal,
                           breaks = c(0, 2, 3)) # Custom labels for the breaks) +
      theme_void() + 
      labs(
        fill = "Coefficient Variation \n3-digit ZIP code SVI"
      )

#### By groups - 3-digit ZIP code SVI

    map_ZipCode_3digit %>% 
      ggplot(aes(fill = SVI_3digit_class)) +
      geom_sf(color = "black", lwd = 0.15) +
      scale_fill_manual(values = c("Low" = "#FFFFDB", "Low-Medium" = "#BDE5CA", 
                                      "Medium-High" = "#7ACCD6", "High" = "#648ec2")) +
      theme_void() + 
      labs(
        fill = "3-digit ZIP code SVI - groups"
      )

#### By 5-digit ZIP codes - Without aggregating

    joined_crosswalk_SVIByZIP_map <- joined_crosswalk_SVIByZIP %>% 
      arrange(ZIP) %>% 
      group_by(ZIP) %>% 
      slice(1) %>% 
      ungroup() %>% 
      mutate(GEOID = ZIP) %>% 
      select(GEOID, A_RPL_THEMES) 

    map_ZipCode_all <- map_ZipCode %>% 
      left_join(joined_crosswalk_SVIByZIP_map, by = "GEOID")

    pal <- wes_palette("Zissou1", 100, type = "continuous")


    map_ZipCode_all %>% 
      ggplot(aes(fill = A_RPL_THEMES)) +
      geom_sf(color = "black", lwd = 0.15) +
      scale_fill_gradientn(colours = pal) +
      theme_void() + 
      labs(
        fill = "5-digit ZIP code SVI"
      )

#### 5-digit ZIP codes - With the classes

     map_ZipCode_all <- map_ZipCode_all %>%
      mutate(
        SVI_5digit_class = case_when(
          A_RPL_THEMES >= 0 & A_RPL_THEMES < 0.25 ~ "Low", 
          A_RPL_THEMES >= 0.25 & A_RPL_THEMES < 0.50 ~ "Low-Medium", 
          A_RPL_THEMES >= 0.50 & A_RPL_THEMES < 0.75 ~ "Medium-High", 
          A_RPL_THEMES >= 0.75 ~ "High"
        )
      )

    map_ZipCode_all %>% 
      ggplot(aes(fill = SVI_5digit_class)) +
      geom_sf(color = "black", lwd = 0.15) +
      scale_fill_manual(values = c("Low" = "#FFFFDB", "Low-Medium" = "#BDE5CA", 
                                      "Medium-High" = "#7ACCD6", "High" = "#648ec2")) +
      theme_void() + 
      labs(
        fill = "5-digit ZIP code SVI - groups"
      )
